<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.3"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2c3e50">
    Adaptive-RAG Paper Architecture
  </text>
  
  <!-- Input Query -->
  <rect x="50" y="80" width="120" height="50" rx="10" fill="#3498db" filter="url(#shadow)"/>
  <text x="110" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Input Query (q)
  </text>
  
  <!-- Classifier -->
  <rect x="320" y="60" width="160" height="90" rx="10" fill="#e74c3c" filter="url(#shadow)"/>
  <text x="400" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Query Complexity
  </text>
  <text x="400" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Classifier
  </text>
  <text x="400" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">
    (T5-Large)
  </text>
  <text x="400" y="140" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">
    Output: {A, B, C}
  </text>
  
  <!-- Strategy A: No Retrieval -->
  <rect x="50" y="220" width="160" height="120" rx="10" fill="#27ae60" filter="url(#shadow)"/>
  <text x="130" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Class A
  </text>
  <text x="130" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">
    No Retrieval
  </text>
  <text x="130" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">
    a = LLM(q)
  </text>
  <text x="130" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    Simple queries
  </text>
  <text x="130" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    Time: ~0.7s
  </text>
  
  <!-- Strategy B: Single-step RAG -->
  <rect x="320" y="220" width="160" height="120" rx="10" fill="#f39c12" filter="url(#shadow)"/>
  <text x="400" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Class B
  </text>
  <text x="400" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">
    Single-step RAG
  </text>
  <text x="400" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">
    d = Retriever(q; D)
  </text>
  <text x="400" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">
    a = LLM(q, d)
  </text>
  <text x="400" y="320" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    Time: ~1.0s
  </text>
  
  <!-- Strategy C: Multi-step RAG -->
  <rect x="590" y="220" width="160" height="120" rx="10" fill="#8e44ad" filter="url(#shadow)"/>
  <text x="670" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
    Class C
  </text>
  <text x="670" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="white">
    Multi-step RAG
  </text>
  <text x="670" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    for i in range(1, k):
  </text>
  <text x="670" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    d_i = Retriever(q, c_i; D)
  </text>
  <text x="670" y="315" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    a_i = LLM(q, d_i, c_i)
  </text>
  <text x="670" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    Time: ~3.3s
  </text>
  
  <!-- Outputs -->
  <rect x="50" y="420" width="160" height="60" rx="10" fill="#95a5a6" filter="url(#shadow)"/>
  <text x="130" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Answer A
  </text>
  <text x="130" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    Fastest
  </text>
  <text x="130" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    Limited knowledge
  </text>
  
  <rect x="320" y="420" width="160" height="60" rx="10" fill="#95a5a6" filter="url(#shadow)"/>
  <text x="400" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Answer B
  </text>
  <text x="400" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    Balanced
  </text>
  <text x="400" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    External knowledge
  </text>
  
  <rect x="590" y="420" width="160" height="60" rx="10" fill="#95a5a6" filter="url(#shadow)"/>
  <text x="670" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
    Answer C
  </text>
  <text x="670" y="455" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    Most accurate
  </text>
  <text x="670" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
    Complex reasoning
  </text>
  
  <!-- Performance Metrics Box -->
  <rect x="550" y="520" width="230" height="70" rx="5" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="2"/>
  <text x="665" y="540" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c3e50">
    Performance (GPT-3.5)
  </text>
  <text x="665" y="555" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    F1: 50.91 | Time: 1.46s | Steps: 1.03
  </text>
  <text x="665" y="570" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    Multi-step accuracy + Single-step efficiency
  </text>
  
  <!-- Arrows -->
  <line x1="170" y1="105" x2="320" y2="105" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <line x1="350" y1="150" x2="130" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="400" y1="150" x2="400" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="450" y1="150" x2="670" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <line x1="130" y1="340" x2="130" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="400" y1="340" x2="400" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="670" y1="340" x2="670" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Labels -->
  <text x="245" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">
    classify
  </text>
  
  <text x="240" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">
    A
  </text>
  <text x="400" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">
    B
  </text>
  <text x="560" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">
    C
  </text>
  
  <!-- Training Data Box -->
  <rect x="20" y="520" width="200" height="70" rx="5" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="2"/>
  <text x="120" y="540" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2c3e50">
    Classifier Training
  </text>
  <text x="120" y="555" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    Auto-labeling from model outcomes
  </text>
  <text x="120" y="570" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">
    Dataset bias (single/multi-hop)
  </text>
</svg>